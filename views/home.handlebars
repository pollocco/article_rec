{{#if isLoggedIn}}
<div id="article-list">
    <transition name="fade">
    <topic-modal v-show="showModal" :topic="activeTopic"></topic-modal></transition>
    <article-preview v-show="showArticleModal" :article="activeArticle" :topiclist="topics"></article-preview>
    <section class="section mainApp">

        <div class="columns">
            <div class="column is-10 is-centered">
                <div class="tile is-ancestor">
                    <div class="tile is-vertical is-12">
                        <div class="tile is-parent">
                            <div>
                                <div class="title">My Articles   
                <button class="button is-primary" id="addNewArticleButton"><a href="/form" style="color:white !important">Add Article</a></button>
                <div class="dropdown" id="filterDrop">
                    <div class="dropdown-trigger">
                        <button class="button" aria-haspopup="true" aria-controls="dropdown-menu2"
                            onclick="filterDrop();">
                            <span class="icon is-small">
                                <i class="fas fa-cog"></i>
                            </span>
                            <span>Filter</span>
                            <span class="icon is-small">
                                <i class="fas fa-angle-down" aria-hidden="true"></i>
                            </span>
                        </button>
                    </div>
                    <div class="dropdown-menu" id="dropdown-menu-filters" role="menu">
                        <div class="dropdown-content" id="dropdown-content">
                            <div class="dropdown-item" style="padding:0;">
                                <div id="filter-body">
                                    <p class="panel-tabs is-size-6">
                                        <a id="periodicalsTab" class="is-active"
                                            v-on:click="setPeriodicalsTab">Sources</a>
                                        <a id="authorsTab" v-on:click="setAuthorsTab">Authors</a>
                                    </p>
                                    <div class="panel-block">
                                        <div>
                                            <div class="panel-block">
                                                <div v-show="isperiodical === true" >
                                                    <filter-table 
                                                        :filters="periodicalArticles.map(
                                                            function(p){
                                                                return{
                                                                    name: p.periodicalName,
                                                                    filterid: p.periodicalId,
                                                                    numberofarticles: p.numberOfArticles
                                                                }
                                                            })"
                                                        :arraymodel="periodicalarray"
                                                        v-on:togglefilter="toggleFilter"
                                                    />
                                                </div>
                                                <div v-show="isperiodical === false" class="table">
                                                    <filter-table
                                                        :filters="authorArticles.map(
                                                            function(a){
                                                                return{
                                                                    name: a.lastName.toUpperCase().trim() + ', ' + a.firstName.trim(),
                                                                    filterid: a.authorId,
                                                                    numberofarticles: a.numberOfArticles
                                                                }
                                                            })"
                                                        :arraymodel="authorarray"
                                                        v-on:togglefilter="toggleFilter"
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-block">
                                        <button class="button is-link is-outlined is-fullwidth" id="resetButton">
                                            Reset all filters
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                                </div>
                                <p class="control has-icons-left">
                                    <input class="input is-medium" name="q" id="searchBox" tabIndex="1" type="text"
                                        placeholder="Enter article title here">
                                    <span class="icon is-medium is-left">
                                        <i class="fas fa-search"></i>
                                    </span>
                                    <transition-group name="list">
                                    <div v-show="!isUserTopics">
                                        <div class="tile is-parent is-vertical box" style="padding: 60px; text-align: center;">
                                            <p class="title">
                                                We don't have any articles for you yet!
                                            </p>
                                            <p class="subtitle">
                                                Pick some topics to get started
                                            </p>
                                            
                                            <p class="columns is-centered">
                                                <span id="noteIcon" class="icon column is-centered is-large">
                                                    <i class="far fa-hand-point-right"></i>
                                                </span>
                                                
                                            </p>
                                            <p>
                                            </p>
                                        </div>
                                    </div>
                                    </transition-group>
                                </p>
                                <article class="is-child tile box" id="articleContainer">
                                    <ul>
                                        <transition-group name="list">
                                            <article-component  v-for="article in articles" 
                                                                :article="article"
                                                                :topiclist="topics" 
                                                                v-bind:key="article.articleId" 
                                                                class="list-item"
                                                                v-on:setuserarticle="setUserArticle"
                                                                v-on:changearticle="changeArticle"
                                                                :isupdatearticle="false"
                                            />
                                        </transition-group>
                                        <p class="columns is-centered">
                                                <i id="noteIcon" class="icon column is-centered is-large">
                                                    
                                                </i>
                                            </p> 
                                    </ul>
                               <span style="visibility: hidden;">
                                                    hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh
                                                    hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh
                                                    hhhhhhhhhhhhhhhhhhhhhhhhhhhhh
                                            </span>      
                            </div>
                                                      
                            </article>
                            </div>
                            <div class="is-child tile" id="pagination">
                                <a :disabled="isPrevPageDisabled" v-on:click="goPrevPage" class="pagination-previous">Previous</a>
                                
                                <a :disabled="isNextPageDisabled" v-on:click="goNextPage" class="pagination-next">Next</a>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="column is-3 is-centered">
                <div class="tile is-ancestor">
                    <div class="tile is-vertical is-12">
                        <div class="tile is-parent">
                            <div class="tile is-child">
                                                               <div class="box" id="topicsTile">
                                    <p class="title">My Topics &nbsp; 📝</p>
                                    <p class="subtitle">Customize your interests</p>
                                    <table class="table">
                                        <tr style="display:none;">
                                            <td style="display:none;"></td>
                                        </tr>
                                        <topic-row  v-for="topic in topics" 
                                                    :key="topic.topicId" 
                                                    :topic="topic" 
                                                    v-on:toggletopic="toggleTopic"
                                                    :usertopics="userTopics" 
                                        />
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="tile is-parent">
                            <article class="tile is-child box">
                                <p class="title">Recent Articles</p>
                                <history-sidebar :articles="userArticles" v-on:setuserarticle="setUserArticle"></history-sidebar>
                            </article>
                        </div>
                    </div>
                </div>
            </div>
        </div>

</div>
</div>
<script>
    function filterDrop() {
            var dropdown = document.querySelector('#filterDrop');
            dropdown.classList.toggle('is-active');
            var dropdownBody = document.querySelector('#filter-body')
            
            document.addEventListener('click', function (e) {
                   dropdown.classList.remove('is-active')
            })
            dropdown.addEventListener('click', function(e){
                e.stopPropagation()
            })
        }
    function topicDrop() {
            var dropdown = document.querySelector('#topicDrop');
            dropdown.classList.toggle('is-active');
        }
</script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vuex@3.4.0/dist/vuex.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="auto-complete.min.js"></script>
<script src="components.js"></script>
<script src="script.js"></script>
</section>
{{/if}}
{{#if isLoggedOut}}
<section class="section">
    <div class="tile is-ancestor">
        <div class="tile is-vertical">
            <div class="tile is-parent">
                <div class="tile is-child">
                    <p class="title box titleText">Welcome to our project page<br /><span
                            class="subtitle subtitleText"><em>CS 340, Intro to Databases</em></span></p>

                </div>
            </div>
            <div class="tile is-parent">
                <div class="tile is-child">
                    <p class="subtitle box">This website was built using Express-Handlebars. The database for the
                        website was designed using DBeaver and written in MySQL. PhpMyAdmin was used for GUI access and
                        maintenance (you know, when you have to delete everything). Bulma provides the wonderful CSS
                        styling you see here before you.</p>
                </div>
            </div>
        </div>
        <div class="tile is-vertical">
            <div class="tile is-parent">
                <div class="tile is-child">
                    <article class="message">
                        <div class="message-header">
                            <p><strong>Did you know?</strong></p>
                        </div>
                        <div class="message-body">
                            <em class="subtitle is-5" style="font-family: 'EB Garamond'">We're the best article
                                recommender there is.</em></p>
                            <p>Don't believe us? You probably shouldn't because this is an intro class</p>
                        </div>
                    </article>
                </div>
            </div>
        </div>
    </div>
</section>
{{/if}}